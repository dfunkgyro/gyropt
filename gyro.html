<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Marketplace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1f2937, #111827);
            color: #f9fafb;
        }
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            animation: fadeIn 1s ease-in-out;
        }
        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2), 0 0 40px rgba(124, 58, 237, 0.3);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .animate-pulse-light {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal.open .modal-content {
            transform: scale(1);
        }
        .alert-banner {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }
    </style>
</head>
<body class="p-6">

    <!-- Announcement Banner (Hidden by default) -->
    <div id="update-alert" class="alert-banner fixed top-0 left-0 right-0 z-50 p-4 text-center bg-yellow-400 text-yellow-900 font-bold hidden">
        ðŸŽ‰ New version available! A file has been updated.
    </div>

    <!-- Main Page Content -->
    <header class="text-center py-12 md:py-16">
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-extrabold tracking-tight text-white animate-pulse-light">
            Creative Commons Digital Hub
        </h1>
        <p class="mt-4 text-lg md:text-xl text-gray-400">
            Download your next project, asset, or design.
        </p>
    </header>

    <main class="container mx-auto px-4 md:px-8 lg:px-12">
        <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12">
            <!-- Product Cards will be dynamically generated here -->
        </div>
    </main>

    <!-- Product Modal (Hidden by default) -->
    <div id="product-modal" class="modal fixed inset-0 z-50 flex items-center justify-center p-4 md:p-8 opacity-0 pointer-events-none">
        <div class="modal-overlay absolute inset-0"></div>
        <div class="modal-content relative bg-gray-800 rounded-2xl p-6 md:p-8 w-full max-w-2xl transform scale-90 transition-all duration-300 shadow-xl">
            <button id="close-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div id="modal-content-placeholder">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const products = [
                { id: '1', name: 'Nebula Pro UI Kit', description: 'A complete user interface kit for space-themed applications.', price: '$29.99', imageUrl: 'https://placehold.co/600x400/3B007B/ffffff?text=UI+Kit' },
                { id: '2', name: 'Astro-Vector Pack', description: '200+ vector graphics of planets, stars, and galaxies.', price: '$19.99', imageUrl: 'https://placehold.co/600x400/9333ea/ffffff?text=Vector+Pack' },
                { id: '3', name: 'Cosmic Soundscapes', description: 'Ambient audio loops and sound effects for your next game or film.', price: '$39.99', imageUrl: 'https://placehold.co/600x400/5B21B6/ffffff?text=Audio+Pack' },
                { id: '4', name: 'Quantum Code Snippets', description: 'Reusable code snippets for building fast, quantum-inspired animations.', price: '$9.99', imageUrl: 'https://placehold.co/600x400/4c1d95/ffffff?text=Code' },
            ];

            const productGrid = document.getElementById('product-grid');
            const productModal = document.getElementById('product-modal');
            const closeModalButton = document.getElementById('close-modal');
            const modalContentPlaceholder = document.getElementById('modal-content-placeholder');
            const updateAlert = document.getElementById('update-alert');

            // --- Function to show update alert ---
            // In a real application, this would be triggered by a webhook or a background check.
            function showUpdateAlert() {
                updateAlert.classList.remove('hidden');
                setTimeout(() => {
                    updateAlert.classList.add('hidden');
                }, 5000); // Hide after 5 seconds
            }

            // Example: Show the alert after the page loads to simulate a new update
            // showUpdateAlert();

            // --- Function to create a product card ---
            function createProductCard(product) {
                const card = document.createElement('div');
                card.className = 'product-card rounded-2xl overflow-hidden bg-gray-900 shadow-lg';
                card.innerHTML = `
                    <div class="relative w-full h-48 sm:h-56 overflow-hidden">
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-70"></div>
                    </div>
                    <div class="p-6">
                        <h2 class="text-xl md:text-2xl font-bold text-purple-400">${product.name}</h2>
                        <p class="mt-2 text-sm text-gray-400">${product.description}</p>
                    </div>
                `;
                card.addEventListener('click', () => showProductModal(product));
                return card;
            }

            // --- Function to show the product modal ---
            function showProductModal(product) {
                modalContentPlaceholder.innerHTML = `
                    <div class="text-center md:flex md:items-center">
                        <div class="md:w-1/2 md:pr-8">
                            <img src="${product.imageUrl}" alt="${product.name}" class="rounded-xl shadow-lg w-full mb-4 md:mb-0">
                        </div>
                        <div class="md:w-1/2 text-left">
                            <h2 class="text-3xl font-bold text-purple-400">${product.name}</h2>
                            <p class="mt-2 text-gray-300 text-lg">${product.description}</p>
                            <p class="text-4xl font-extrabold text-white mt-4">${product.price}</p>
                            <div class="mt-8">
                                <button id="checkout-button" class="w-full py-3 px-6 rounded-lg font-bold text-white bg-green-500 hover:bg-green-600 transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-green-500/50">
                                    Simulate Payment
                                </button>
                                <div id="payment-status" class="mt-4 text-center hidden">
                                    <p class="text-green-400 font-semibold text-lg">Payment Successful!</p>
                                    <p class="text-gray-400 text-sm">Your download is ready.</p>
                                    <a id="download-link" href="#" class="mt-4 inline-block py-3 px-6 bg-blue-500 rounded-lg text-white font-bold hover:bg-blue-600 transition-colors duration-200">
                                        Download File
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                // Add event listener for the simulated checkout button
                const checkoutButton = document.getElementById('checkout-button');
                const paymentStatus = document.getElementById('payment-status');
                const downloadLink = document.getElementById('download-link');

                checkoutButton.addEventListener('click', () => {
                    // Simulate Stripe Checkout process
                    checkoutButton.textContent = 'Processing...';
                    checkoutButton.disabled = true;
                    checkoutButton.classList.add('opacity-50');

                    setTimeout(() => {
                        // After a delay, simulate a successful payment webhook response
                        checkoutButton.style.display = 'none';
                        paymentStatus.classList.remove('hidden');

                        // Create a dummy file for the download link
                        // In a real app, this would be a secure URL from your backend
                        const dummyFileContent = `This is the dummy file for ${product.name}. In a real application, you would download the actual product here.`;
                        const blob = new Blob([dummyFileContent], { type: 'text/plain' });
                        downloadLink.href = URL.createObjectURL(blob);
                        downloadLink.download = `${product.name.replace(/\s/g, '-')}-download.txt`;
                    }, 2000); // 2-second delay to simulate payment processing
                });

                // Display the modal
                productModal.classList.remove('opacity-0', 'pointer-events-none');
                productModal.classList.add('open');
            }

            // --- Function to hide the product modal ---
            function hideProductModal() {
                productModal.classList.add('opacity-0', 'pointer-events-none');
                productModal.classList.remove('open');
            }

            // Populate the product grid on page load
            products.forEach(product => {
                productGrid.appendChild(createProductCard(product));
            });

            // Add event listeners for the modal
            closeModalButton.addEventListener('click', hideProductModal);
            productModal.addEventListener('click', (e) => {
                // Close the modal if the user clicks the overlay
                if (e.target === productModal) {
                    hideProductModal();
                }
            });
        });

        // Trigger the update alert for demonstration
        window.addEventListener('load', () => {
            const updateAlert = document.getElementById('update-alert');
            updateAlert.classList.remove('hidden');
            setTimeout(() => {
                updateAlert.classList.add('hidden');
            }, 5000); // Hide after 5 seconds
        });
    </script>
</body>
</html>
